application-properties:
  # Tạm thời: user dùng khi chưa đăng nhập. Xóa hoặc để trống sau khi bật Keycloak.
  default-user-id: "16d69b1e-99d6-4669-a4ac-8ee5978dd6ea"
  sepay-properties:
    sepay-username: ${SEPAY_USERNAME}
    sepay-password: ${SEPAY_PASSWORD}
  bank-properties:
    bank-number: 22226376222
    bank-code: TPBANK
    account-holder: NHU DINH NHAT
  keycloak-properties:
    realm-name: ${KEYCLOAK_REALM:ssos-realm}
    client-id: ${KEYCLOAK_CLIENT_ID:ssos-app}
    server-url: ${KEYCLOAK_HOST:}
    admin-client-id: ${KEYCLOAK_ADMIN_CLIENT_ID:admin-cli}
    admin-username: ${KEYCLOAK_ADMIN_USERNAME:}
    admin-password: ${KEYCLOAK_ADMIN_PASSWORD:}
    token-url: ${KEYCLOAK_TOKEN_URL}
    accept-clients:
      - ssos-app
      - ssos-sepay
  security-properties:
    admin-endpoints:
      - { method: GET, path: /test/admin }
      - { method: POST, path: /api/payments/sepay/hook }
      - { method: GET, path: /api/categories }
      - { method: POST, path: /api/categories }
      - { method: PUT, path: /api/categories/* }
      - { method: DELETE, path: /api/categories/* }
      - { method: POST, path: /api/shoes }
      # brands đã chuyển sang public-endpoints (không cần Keycloak)
    manager-endpoints:
      - { method: GET, path: /test/manager }
    customer-endpoints:
      - { method: GET, path: /api/orders }
      - { method: POST, path: /api/orders/init }
      # cart, wishlist đã chuyển sang public-endpoints (không cần Keycloak)
    webhook-endpoints:
      - { method: POST, path: /api/payments/sepay/hook }
    # API public (không cần Keycloak) - cart, wishlist, brand
    public-endpoints:
      - { method: GET, path: /test/free }
      - { method: GET, path: /user }
      - { method: GET, path: /api/categories }
      - { method: GET, path: /api/categories/* }
      - { method: POST, path: /api/categories }
      - { method: PUT, path: /api/categories/* }
      - { method: DELETE, path: /api/categories/* }
      - { method: POST, path: /api/shoes }
      - { method: POST, path: /api/payments/sepay/hook }
      - { method: POST, path: /webhook/keycloak/register }
      - { method: POST, path: /sepay/auth/token }
      - { method: GET, path: /api/brands }
      - { method: GET, path: /api/brands/* }
      - { method: POST, path: /api/brands }
      - { method: PUT, path: /api/brands/* }
      - { method: DELETE, path: /api/brands/* }
      - { method: GET, path: /api/wishlist }
      - { method: POST, path: /api/wishlist }
      - { method: DELETE, path: /api/wishlist/* }
      - { method: GET, path: /api/cart }
      - { method: POST, path: /api/cart }
      - { method: PUT, path: /api/cart/* }
      - { method: DELETE, path: /api/cart/* }
      - { method: DELETE, path: /api/cart }
      - { method: GET, path: /api/shoes/*/variants }

    public-urls:
      # OpenAPI Swagger URLs
      - /swagger-ui.html
      - /swagger-ui/**
      - /v3/api-docs/**
      - /v3/api-docs.yaml
      # Actuator endpoints:
      - /actuator/**
      # Custom no-auth URLs:
      - /test/free
      - /chat
#    sepay-api-key: ${SEPAY_API_KEY}

spring:
  application:
    name: shoes-shopping-online-system
  datasource:
    url: jdbc:postgresql://${POSTGRESQL_HOST:localhost}:${POSTGRESQL_PORT:5432}/${POSTGRESQL_NAME:ssos}
    username: ${POSTGRESQL_USERNAME:postgres}
    password: ${POSTGRESQL_PASSWORD:123456}
  #    url: jdbc:postgresql://localhost:5432/ssos
  #    username: postgres
  #    password: 123456
  jpa:
    hibernate:
      ddl-auto: update
  threads.virtual.enabled: true # Make use of Spring Boot 3.2+ Virtual Threads support
  security.oauth2.resourceserver:
    jwt.issuer-uri: https://${KEYCLOAK_HOST:auth.it4beginer.io.vn}/realms/${application-properties.keycloak-properties.realm-name}
  ai:
    chat:
      client:
        enabled: false
    openai:
      api-key: ${OPENAI_API_KEY}
      chat:
        options:
          model: gpt-4o-mini
          temperature: 0.2
          max-tokens: 1024
    google:
      genai:
        api-key: ${GEMINI_API_KEY}
        chat:
          options:
            model: gemini-1.5-pro
            temperature: 0.2
            max-output-tokens: 1024
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/master.yaml

    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

logging.level:
  # If you are curious about how Spring Security OAuth2 works behind the scene
  org.springframework.security.oauth2: TRACE
  org.springframework.ai: INFO
  org.springframework.ai.chat.client.advisor: DEBUG
springdoc.swagger-ui:
  path: /swagger-ui
  disable-swagger-default-url: true
server:
  port: 8088
  shutdown: graceful

management:
  endpoints:
    web:
      exposure:
        include: health

bank:
  number: 22226376222
  code: TPBANK
  holder: NHU DINH NHAT
